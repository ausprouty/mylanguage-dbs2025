<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <!-- set at runtime via router/site meta -->
    <meta name="api-origin" content="https://api2.mylanguage.net.au">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Quasar injects PWA meta/links when injectPwaMetaTags: true -->
  </head>
  <body>
    <noscript>
      <p>This site requires JavaScript to function. Please enable it.</p>
    </noscript>

    <!-- quasar:entry-point -->

    <style>
    /* --- Generic PWA Splash (multi-site) --- */
:root {
  --splash-bg: none;
  --splash-pos: 50% 42%;
}

/* Show until JS adds .splash-done to <html> */
html:not(.splash-done)::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: block;
  background:
    var(--splash-bg) no-repeat,
    #111; /* fallback color behind image */
  background-position: var(--splash-pos);
  background-size: cover;
  transition: opacity 420ms ease;
  will-change: opacity;
}

/* Ultra-wide screens: avoid cropping */
@media (min-aspect-ratio: 21/9) {
  html:not(.splash-done)::before {
    background-size: contain;   /* show whole image */
    background-color: #111;     /* letterbox bars color */
    background-position: center;
  }
}

/* Very tall windows: avoid cropping */
@media (max-aspect-ratio: 9/21) {
  html:not(.splash-done)::before {
    background-size: contain;
    background-color: #111;
    background-position: center;
  }
}

/* Fade out when ready */
html.splash-done::before {
  opacity: 0;
  pointer-events: none;
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  html:not(.splash-done)::before {
    transition: none;
  }
}

    </style>

    <script>
(function () {
  var mq = window.matchMedia("(orientation: portrait)");
  var onOrient = function () {
    var portrait = mq.matches;
    var path = "/splash/" + (portrait ? "splash-portrait.webp" : "splash-landscape.webp");
    document.documentElement.style.setProperty("--splash-bg", 'url("' + path + '")');
  };

  // Set initial splash background
  onOrient();
  mq.addEventListener("change", onOrient);

  // Timing controls
  var MIN_MS = 2200;   // set your desired minimum
  var MAX_MS = 6000;   // safety cap so it never hangs

  // If coming from bfcache, skip long splash
  window.addEventListener("pageshow", function (e) {
    if (e.persisted) {
      document.documentElement.classList.add("splash-done");
    }
  });

  // Start the timer after the first paint
  var splashStart = performance.now();
  requestAnimationFrame(function () {
    splashStart = performance.now();
  });

  // Wait for either 'load' or the max cap, whichever comes first
  var loaded = false;
  function finishIfReady() {
    if (loaded) return;
    loaded = true;

    var elapsed = performance.now() - splashStart;
    var remaining = Math.max(0, MIN_MS - elapsed);

    setTimeout(function () {
      document.documentElement.classList.add("splash-done");
      // cleanup
      mq.removeEventListener("change", onOrient);
    }, remaining);
  }

  // Normal path: finish after load + min duration
  window.addEventListener("load", finishIfReady);

  // Safety cap: if 'load' takes too long, end at MAX_MS
  setTimeout(finishIfReady, MAX_MS);
})();
</script>


    <!-- Optional: help the splash appear instantly -->
    <link
      rel="preload"
      as="image"
      href="/splash/splash-portrait.webp"
      imagesrcset="/splash/splash-portrait.webp 1x, /splash/splash-portrait@2x.webp 2x"
    />

    <link
      rel="preload"
      as="image"
      href="/splash/splash-landscape.webp"
      imagesrcset="/splash/splash-landscape.webp 1x, /splash/splash-landscape@2x.webp 2x"
    />
  </body>
</html>
